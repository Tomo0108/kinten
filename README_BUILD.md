# Kinten ビルドスクリプト

このプロジェクトには、クリックで簡単にビルドできるバッチファイルが用意されています。

> 💡 **より使いやすいHTML版もあります**: [open_build_guide.bat](open_build_guide.bat) を実行してHTML版のガイドを開くことができます。

## 利用可能なビルドスクリプト

### 1. `build_all.bat` - 全体ビルド
- バックエンドとフロントエンドの両方を一度にビルドします
- **推奨**: 初回ビルドや全体を更新したい場合

### 2. `build_backend.bat` - バックエンドのみ
- Pythonバックエンドのみをビルドします
- PyInstallerを使用して実行可能ファイルを生成

### 3. `build_frontend.bat` - フロントエンドのみ
- Flutterフロントエンドのみをビルドします
- Windows用のリリースビルドを生成

### 4. `clean_build.bat` - クリーンアップ
- ビルドファイルを削除してクリーンアップします
- 問題が発生した場合の再ビルドに使用

### 5. `create_distribution.bat` - 配布用パッケージ作成
- バックエンドとフロントエンドをビルドして配布用ZIPファイルを作成
- PythonやFlutterがインストールされていない環境でも動作
- templatesフォルダに雛形ファイルを含む

## 使用方法

1. 任意の `.bat` ファイルをダブルクリック
2. コマンドプロンプトが開き、ビルドが開始されます
3. 完了まで待機（進行状況が表示されます）
4. 完了後、任意のキーを押してウィンドウを閉じる

## ビルド出力

### バックエンド
- 実行ファイル: `dist\kinten_backend.exe`
- データフォルダ: `dist\templates`, `dist\input`, `dist\output`
  - テンプレートファイル、入力ファイル、出力ファイルが含まれます

### フロントエンド
- 実行ファイル: `frontend\build\windows\runner\Release\kinten.exe`

### 配布用パッケージ
- ZIPファイル: `kinten.zip`
- 内容: `kinten/` フォルダ内に実行ファイルとデータフォルダ
- 使用方法: ZIPを展開後、`start_kinten.bat` を実行

## 注意事項

- 初回実行時は依存関係のインストールに時間がかかる場合があります
- Flutter SDKがインストールされている必要があります
- Python仮想環境（venv）が設定されている必要があります
- ビルド時には `templates`、`input`、`output` フォルダが自動的に含まれます
- クリーンアップ時はデータフォルダは保護され、削除されません
- 配布用パッケージには雛形ファイルが含まれ、Python/Flutter不要で動作します

## 配布用パッケージの使用方法

### 配布パッケージの作成
1. `create_distribution.bat` を実行
2. `kinten.zip` ファイルが生成されます

### 配布先での使用方法
1. `kinten.zip` を任意の場所に展開
2. `kinten` フォルダ内の `start_kinten.bat` をダブルクリック
3. または `kinten.exe` を直接実行

### 配布パッケージの特徴
- PythonやFlutterがインストールされていない環境でも動作
- 必要なファイルがすべて含まれている
- templatesフォルダに雛形ファイルが含まれている
- input/outputフォルダは空の状態で配布

## トラブルシューティング

ビルドで問題が発生した場合：

1. `clean_build.bat` を実行してクリーンアップ
2. 再度 `build_all.bat` を実行
3. エラーメッセージを確認して必要な依存関係をインストール

配布パッケージで問題が発生した場合：

1. アンチウイルスソフトの除外設定を確認
2. Windows Defenderの除外設定を確認
3. 管理者権限で実行を試行

---

**作成日**: 2025年8月7日 